"use strict";(self.webpackChunknotes_frankfeekr_cn=self.webpackChunknotes_frankfeekr_cn||[]).push([[3938],{5680:(n,e,t)=>{t.d(e,{xA:()=>p,yg:()=>g});var r=t(6540);function s(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function i(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function o(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?i(Object(t),!0).forEach((function(e){s(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function a(n,e){if(null==n)return{};var t,r,s=function(n,e){if(null==n)return{};var t,r,s={},i=Object.keys(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||(s[t]=n[t]);return s}(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(s[t]=n[t])}return s}var l=r.createContext({}),c=function(n){var e=r.useContext(l),t=e;return n&&(t="function"==typeof n?n(e):o(o({},e),n)),t},p=function(n){var e=c(n.components);return r.createElement(l.Provider,{value:e},n.children)},u="mdxType",d={inlineCode:"code",wrapper:function(n){var e=n.children;return r.createElement(r.Fragment,{},e)}},f=r.forwardRef((function(n,e){var t=n.components,s=n.mdxType,i=n.originalType,l=n.parentName,p=a(n,["components","mdxType","originalType","parentName"]),u=c(t),f=s,g=u["".concat(l,".").concat(f)]||u[f]||d[f]||i;return t?r.createElement(g,o(o({ref:e},p),{},{components:t})):r.createElement(g,o({ref:e},p))}));function g(n,e){var t=arguments,s=e&&e.mdxType;if("string"==typeof n||s){var i=t.length,o=new Array(i);o[0]=f;var a={};for(var l in e)hasOwnProperty.call(e,l)&&(a[l]=e[l]);a.originalType=n,a[u]="string"==typeof n?n:s,o[1]=a;for(var c=2;c<i;c++)o[c]=t[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}f.displayName="MDXCreateElement"},5030:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>a,toc:()=>c});var r=t(8168),s=(t(6540),t(5680));const i={},o="\u9879\u76ee\u529f\u80fd",a={unversionedId:"frontend/es6/\u5b9e\u6218\u9879\u76ee/\u9879\u76ee\u529f\u80fd",id:"frontend/es6/\u5b9e\u6218\u9879\u76ee/\u9879\u76ee\u529f\u80fd",title:"\u9879\u76ee\u529f\u80fd",description:"\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5217\u8868",source:"@site/docs/03.frontend/es6/08-\u5b9e\u6218\u9879\u76ee/02-\u9879\u76ee\u529f\u80fd.md",sourceDirName:"03.frontend/es6/08-\u5b9e\u6218\u9879\u76ee",slug:"/frontend/es6/\u5b9e\u6218\u9879\u76ee/\u9879\u76ee\u529f\u80fd",permalink:"/docs/frontend/es6/\u5b9e\u6218\u9879\u76ee/\u9879\u76ee\u529f\u80fd",draft:!1,editUrl:"https://github.com/frank-lam/frankfeekr-notes/tree/master/docs/03.frontend/es6/08-\u5b9e\u6218\u9879\u76ee/02-\u9879\u76ee\u529f\u80fd.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{},sidebar:"frontend_es6",previous:{title:"\u521d\u59cb\u5316\u73af\u5883",permalink:"/docs/frontend/es6/\u5b9e\u6218\u9879\u76ee/\u521d\u59cb\u5316\u73af\u5883"},next:{title:"\u73af\u5883\u6784\u5efa",permalink:"/docs/category/\u73af\u5883\u6784\u5efa-1"}},l={},c=[{value:"\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5217\u8868",id:"\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5217\u8868",level:2},{value:"\u83b7\u53d6\u6570\u636e\u6d41\u7a0b",id:"\u83b7\u53d6\u6570\u636e\u6d41\u7a0b",level:3},{value:"\u4f7f\u7528Proxy\u4ee3\u7406\u7528\u6237\u4fe1\u606f",id:"\u4f7f\u7528proxy\u4ee3\u7406\u7528\u6237\u4fe1\u606f",level:2},{value:"\u5f02\u6b65\u64cd\u4f5c\u591a\u5f20\u56fe\u7247\u4e0a\u4f20\u963f\u91cc\u4e91OSS",id:"\u5f02\u6b65\u64cd\u4f5c\u591a\u5f20\u56fe\u7247\u4e0a\u4f20\u963f\u91cc\u4e91oss",level:2},{value:"\u7ec4\u4ef6\u6309\u9700\u52a0\u8f7d",id:"\u7ec4\u4ef6\u6309\u9700\u52a0\u8f7d",level:2}],p={toc:c},u="wrapper";function d(n){let{components:e,...i}=n;return(0,s.yg)(u,(0,r.A)({},p,i,{components:e,mdxType:"MDXLayout"}),(0,s.yg)("h1",{id:"\u9879\u76ee\u529f\u80fd"},"\u9879\u76ee\u529f\u80fd"),(0,s.yg)("h2",{id:"\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5217\u8868"},"\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5217\u8868"),(0,s.yg)("h3",{id:"\u83b7\u53d6\u6570\u636e\u6d41\u7a0b"},"\u83b7\u53d6\u6570\u636e\u6d41\u7a0b"),(0,s.yg)("p",null,(0,s.yg)("img",{alt:"img",src:t(5814).A,width:"1392",height:"1286"})),(0,s.yg)("p",null,"\u5728views\u6587\u4ef6\u5939\u4e2d\u521b\u5efaUser.vue\u6587\u4ef6\u3002"),(0,s.yg)("p",null,"\u5b89\u88c5axios"),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-sh"},"npm i axios --save\n<template>\n  <div>\n    <div>\u7528\u6237\u4fe1\u606f</div>\n    <ul>\n      <li v-for=\"(item, index) in userList\" :key=\"index\">{{item.name}}</li>\n    </ul>\n  </div>\n</template>\n\n<script>\n// \u6a21\u5757\u5316\nimport axios from 'axios'\nexport default {\n  data () {\n    return {\n      userList: []\n    }\n  },\n  // Promise\u65b9\u5f0f\u5b9e\u73b0\n  /*   created () {\n      axios\n        .get('http://jsonplaceholder.typicode.com/users')\n        .then(res => {\n          console.log(res)\n          this.userList = res.data\n        })\n        .catch(err => {\n          console.log(err)\n        })\n    } */\n\n  // async/await\u65b9\u5f0f\u5b9e\u73b0\n  async created () {\n    // \u89e3\u6784\u8d4b\u503c\n    const { data } = await axios.get('http://jsonplaceholder.typicode.com/users')\n    this.userList = data\n  }\n}\n<\/script>\n\n<style>\nli {\n    list-style: none;\n}\nul{\n    padding: 0;\n}\n</style>\n")),(0,s.yg)("p",null,"\u5728router/index.js\u4e2d\u914d\u7f6e\u8def\u7531\u3002"),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-js"},"import User from '../views/User.vue'\n\nconst routes = [{\n    path: '/',\n    name: 'User',\n    component: User\n}]\n")),(0,s.yg)("p",null,"\u5728App.vue\u4e2d\u914d\u7f6e\u94fe\u63a5\u3002"),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-html"},'<router-link to="/">\u7528\u6237\u5217\u8868</router-link>\n')),(0,s.yg)("h2",{id:"\u4f7f\u7528proxy\u4ee3\u7406\u7528\u6237\u4fe1\u606f"},"\u4f7f\u7528Proxy\u4ee3\u7406\u7528\u6237\u4fe1\u606f"),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <div>\n    <div>\u7528\u6237\u4fe1\u606f</div>\n    <button @click=\"asc\">\u5347\u5e8f</button>\n    <button @click=\"desc\">\u964d\u5e8f</button>\n    <button @click=\"reset\">\u91cd\u7f6e</button>\n    <ul>\n      <li v-for=\"(item, index) in userList\" :key=\"index\">{{item.name}}</li>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nexport default {\n  data () {\n    return {\n      userList: []\n    }\n  },\n  //   created () {\n  //     axios\n  //       .get('http://jsonplaceholder.typicode.com/users')\n  //       .then(res => {\n  //         console.log(res)\n  //         this.userList = res.data\n  //       })\n  //       .catch(err => {\n  //         console.log(err)\n  //       })\n  //   }\n  async created () {\n    // \u89e3\u6784\u8d4b\u503c\n    const { data } = await axios.get('http://jsonplaceholder.typicode.com/users')\n    // \u4ee3\u7406\n    this.proxy = new Proxy({}, {\n      get (target, key) {\n        if (key === 'asc') { // \u5347\u5e8f\n          return [].concat(data).sort((a, b) => a.name > b.name ? 1 : -1)\n        } else if (key === 'desc') { // \u964d\u5e8f\n          return [].concat(data).sort((a, b) => b.name > a.name ? 1 : -1)\n        } else {\n          return data\n        }\n      },\n      set () {\n        return false\n      }\n    })\n    this.userList = this.proxy.default\n  },\n  methods: {\n    asc () {\n      this.userList = this.proxy.asc\n    },\n    desc () {\n      this.userList = this.proxy.desc\n    },\n    reset () {\n      this.userList = this.proxy.default\n    }\n  }\n}\n<\/script>\n\n<style>\nli {\n    list-style: none;\n}\nul{\n    padding: 0;\n}\n</style>\n")),(0,s.yg)("h2",{id:"\u5f02\u6b65\u64cd\u4f5c\u591a\u5f20\u56fe\u7247\u4e0a\u4f20\u963f\u91cc\u4e91oss"},"\u5f02\u6b65\u64cd\u4f5c\u591a\u5f20\u56fe\u7247\u4e0a\u4f20\u963f\u91cc\u4e91OSS"),(0,s.yg)("p",null,"\u56fe\u7247\u4e0a\u4f20\u6d41\u7a0b\u56fe\uff1a"),(0,s.yg)("p",null,(0,s.yg)("img",{alt:"img",src:t(1784).A,width:"2038",height:"1300"})),(0,s.yg)("p",null,"\u5728views\u6587\u4ef6\u5939\u4e2d\u521b\u5efaUpload.vue\u6587\u4ef6\u3002"),(0,s.yg)("p",null,"\u5b89\u88c5ali-oss:"),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-sh"},'npm i ali-oss --save\n<template>\n  <div>\n\n    <label for="upload" class="choose-img" :class="{upLoading: isUploading}">\u9009\u62e9\u56fe\u7247\u4e0a\u4f20</label>\n    <input type="file" multiple id="upload"\n    style="display: none;" accept="image/*"\n    @change="onChange" ref="file" :disabled="isUploading"\n    >\n    <p class="tip">\u63d0\u793a\uff1a\u4e00\u6b21\u53ef\u9009\u62e9\u591a\u5f20\u56fe\u7247\uff0c\u6700\u591a\u4e0d\u8d85\u8fc79\u5f20\uff08\u5355\u5f20\u56fe\u7247\u5927\u5c0f &lt; 1M\uff09</p>\n    <ul class="img-container">\n        <li v-for="(item, index) in imgList" :key="index"\n        :style="{background: `url(${item}) no-repeat center/contain` }"\n        ></li>\n    </ul>\n\n  </div>\n</template>\n\n<script>\nimport OSS from \'ali-oss\'\nconst ACCESSKEY = {\n  ID: \'\u8bf7\u586b\u5199\u81ea\u5df1\u7684accessKeyId\', \n  SECRET: \'\u8bf7\u586b\u5199\u81ea\u5df1\u7684accessKeySecret\'\n}\nexport default {\n  data () {\n\n    return {\n      client: new OSS({\n        region: \'oss-cn-beijing\',\n        bucket: \'imooc-es\',\n        accessKeyId: ACCESSKEY.ID,\n        accessKeySecret: ACCESSKEY.SECRET\n      }),\n      imgList: [], // \u5b58\u653e\u4e0a\u4f20\u5b8c\u6210\u7684\u56fe\u7247\u7684\u5217\u8868\n      isUploading: false // \u5f53\u524d\u56fe\u7247\u662f\u5426\u6b63\u5728\u4e0a\u4f20\n    }\n\n  }, \n  methods: {\n\n    onChange () {\n      // \u53ef\u9009\u94fe\n      const newFiles = this.$refs?.file?.files\n      // \u6821\u9a8c\n      if (newFiles.length > 9) {\n        alert(\'\u6700\u591a\u53ef\u4ee5\u4e00\u6b21\u9009\u62e99\u5f20\u56fe\u7247\')\n        return false\n      }\n      const files = []\n      for (const file of newFiles) {\n        const size = file.size / 1024 / 1024 // \u628a\u5355\u4f4d\u8f6c\u5316\u6210M\n        if (size > 1) {\n          alert(\'\u8bf7\u9009\u62e91M\u4ee5\u5185\u7684\u56fe\u7247\')\n          return false\n        }\n        files.push(file)\n      }\n      this.uploadFilesByOSS2(files)\n    },\n    // \u4e0a\u4f20\u591a\u56fe\u5230\u963f\u91cc\u4e91OSS\n    uploadFilesByOSS (files) {\n      this.isUploading = true\n      const uploadRequest = []\n      for (const file of files) {\n        uploadRequest.push(new Promise((resolve, reject) => {\n          this.client.put( `${Math.random()}-${file.name}` , file).then(res => {\n            // console.log(res)\n            // this.imgList = [...this.imgList, res.url]\n            resolve(res.url)\n          }).catch(err => {\n            console.log(err)\n            reject(err)\n          })\n        }))\n      }\n      Promise.allSettled(uploadRequest).then(res => {\n        console.log(res)\n        const imgs = []\n        for (const item of res) {\n          if (item.status === \'fulfilled\') {\n            imgs.push(item.value)\n          }\n        }\n        this.imgList = imgs\n        this.isUploading = false\n      }).catch(err => {\n        console.log(err)\n      })\n    },\n    // async / await\n    async uploadFilesByOSS2 (files) {\n      this.isUploading = true\n      const imgs = []\n      for (const file of files) {\n        const result = await this.client.put( `${Math.random()}-${file.name}` , file)\n        imgs.push(result.url)\n      }\n      this.imgList = imgs\n      this.isUploading = false\n    }\n\n  }\n}\n<\/script>\n\n<style scoped>\n.choose-img {\n\n    display: block;\n    width: 150px;\n    height: 50px;\n    text-align: center;\n    line-height: 50px;\n    background-color: #42b983;\n    color: #fff;\n    border-radius: 5px;\n    cursor: pointer;\n\n}\n.tip {\n\n    color: #ccc;\n\n}\n\n.img-container > li{\n\n    list-style: none;\n    width: 150px; \n    height: 100px; \n    float: left; \n    margin: 0 30px 30px 0; \n    border: 1px solid #ccc; \n\n}\n\n.upLoading{\n\n    background-color: #ccc;\n\n}\n</style>\n')),(0,s.yg)("h2",{id:"\u7ec4\u4ef6\u6309\u9700\u52a0\u8f7d"},"\u7ec4\u4ef6\u6309\u9700\u52a0\u8f7d"),(0,s.yg)("p",null,"\u5728router/index.js\u4e2d\u5bf9\u7ec4\u4ef6\u5b9e\u73b0\u6309\u9700\u52a0\u8f7d\u3002"),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-js"},"const routes = [\n  {\n    path: '/',\n    name: 'User',\n    component: User\n  }, {\n    path: '/upload',\n    name: 'Upload',\n    component: () => import('../views/Upload.vue')\n  }\n]\n")))}d.isMDXComponent=!0},5814:(n,e,t)=>{t.d(e,{A:()=>r});const r=t.p+"assets/images/13.448f5b8c-6dfd2446a7a3efe3f6503986af9151ba.png"},1784:(n,e,t)=>{t.d(e,{A:()=>r});const r=t.p+"assets/images/14.6f7fcc9a-fb0e2814d9058d55fc0d53ba99faea75.png"}}]);