"use strict";(self.webpackChunknotes_frankfeekr_cn=self.webpackChunknotes_frankfeekr_cn||[]).push([[8654],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return m}});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var p=r.createContext({}),u=function(e){var n=r.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},c=function(e){var n=u(e.components);return r.createElement(p.Provider,{value:n},e.children)},i={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},g=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,p=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),g=u(t),m=o,y=g["".concat(p,".").concat(m)]||g[m]||i[m]||a;return t?r.createElement(y,l(l({ref:n},c),{},{components:t})):r.createElement(y,l({ref:n},c))}));function m(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,l=new Array(a);l[0]=g;var s={};for(var p in n)hasOwnProperty.call(n,p)&&(s[p]=n[p]);s.originalType=e,s.mdxType="string"==typeof e?e:o,l[1]=s;for(var u=2;u<a;u++)l[u]=t[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}g.displayName="MDXCreateElement"},9867:function(e,n,t){t.r(n),t.d(n,{assets:function(){return c},contentTitle:function(){return p},default:function(){return m},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return i}});var r=t(7462),o=t(3366),a=(t(7294),t(3905)),l=["components"],s={},p="Proxy",u={unversionedId:"frontend/es6/es2015/Proxy",id:"frontend/es6/es2015/Proxy",title:"Proxy",description:"\u5728 ES6 \u6807\u51c6\u4e2d\u65b0\u589e\u7684\u4e00\u4e2a\u975e\u5e38\u5f3a\u5927\u7684\u529f\u80fd\u662f Proxy\uff0c\u5b83\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e00\u4e9b\u5e38\u7528\u884c\u4e3a\u5982\u67e5\u627e\u3001\u8d4b\u503c\u3001\u679a\u4e3e\u3001\u51fd\u6570\u8c03\u7528\u7b49\u3002\u901a\u8fc7 Proxy \u8fd9\u4e2a\u540d\u79f0\u4e5f\u53ef\u4ee5\u770b\u51fa\u6765\u5b83\u5305\u542b\u4e86\u201c\u4ee3\u7406\u201d\u7684\u542b\u4e49\uff0c\u53ea\u8981\u6709\u201c\u4ee3\u7406\u201d\u7684\u8bc9\u6c42\u90fd\u53ef\u4ee5\u8003\u8651\u4f7f\u7528 Proxy \u6765\u5b9e\u73b0\u3002",source:"@site/docs/03.frontend/es6/02-es2015/12-Proxy.md",sourceDirName:"03.frontend/es6/02-es2015",slug:"/frontend/es6/es2015/Proxy",permalink:"/docs/frontend/es6/es2015/Proxy",editUrl:"https://github.com/frank-lam/frankfeekr-notes/tree/master/docs/03.frontend/es6/02-es2015/12-Proxy.md",tags:[],version:"current",sidebarPosition:12,frontMatter:{},sidebar:"frontend_es6",previous:{title:"Number",permalink:"/docs/frontend/es6/es2015/Number"},next:{title:"Reflect",permalink:"/docs/frontend/es6/es2015/Reflect"}},c={},i=[{value:"\u57fa\u672c\u8bed\u6cd5",id:"\u57fa\u672c\u8bed\u6cd5",level:2},{value:"\u62e6\u622a\u64cd\u4f5c\u573a\u666f",id:"\u62e6\u622a\u64cd\u4f5c\u573a\u666f",level:2},{value:"\u5e38\u7528\u62e6\u622a\u64cd\u4f5c",id:"\u5e38\u7528\u62e6\u622a\u64cd\u4f5c",level:2},{value:"get",id:"get",level:3},{value:"set",id:"set",level:3},{value:"has",id:"has",level:3},{value:"ownKeys",id:"ownkeys",level:3},{value:"deleteProperty",id:"deleteproperty",level:3},{value:"apply",id:"apply",level:3},{value:"construct",id:"construct",level:3},{value:"\u63a8\u8350\u9605\u8bfb",id:"\u63a8\u8350\u9605\u8bfb",level:3}],g={toc:i};function m(e){var n=e.components,t=(0,o.Z)(e,l);return(0,a.kt)("wrapper",(0,r.Z)({},g,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"proxy"},"Proxy"),(0,a.kt)("p",null,"\u5728 ES6 \u6807\u51c6\u4e2d\u65b0\u589e\u7684\u4e00\u4e2a\u975e\u5e38\u5f3a\u5927\u7684\u529f\u80fd\u662f Proxy\uff0c\u5b83\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e00\u4e9b\u5e38\u7528\u884c\u4e3a\u5982\u67e5\u627e\u3001\u8d4b\u503c\u3001\u679a\u4e3e\u3001\u51fd\u6570\u8c03\u7528\u7b49\u3002\u901a\u8fc7 Proxy \u8fd9\u4e2a\u540d\u79f0\u4e5f\u53ef\u4ee5\u770b\u51fa\u6765\u5b83\u5305\u542b\u4e86\u201c\u4ee3\u7406\u201d\u7684\u542b\u4e49\uff0c\u53ea\u8981\u6709\u201c\u4ee3\u7406\u201d\u7684\u8bc9\u6c42\u90fd\u53ef\u4ee5\u8003\u8651\u4f7f\u7528 Proxy \u6765\u5b9e\u73b0\u3002"),(0,a.kt)("h2",{id:"\u57fa\u672c\u8bed\u6cd5"},"\u57fa\u672c\u8bed\u6cd5"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u8bed\u6cd5")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let p = new Proxy(target, handler)\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u89e3\u91ca")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"center"},"\u53c2\u6570"),(0,a.kt)("th",{parentName:"tr",align:"center"},"\u542b\u4e49"),(0,a.kt)("th",{parentName:"tr",align:"center"},"\u5fc5\u9009"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"target"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u7528 Proxy \u5305\u88c5\u7684\u76ee\u6807\u5bf9\u8c61\uff08\u53ef\u4ee5\u662f\u4efb\u4f55\u7c7b\u578b\u7684\u5bf9\u8c61\uff0c\u5305\u62ec\u539f\u751f\u6570\u7ec4\uff0c\u51fd\u6570\uff0c\u751a\u81f3\u53e6\u4e00\u4e2a\u4ee3\u7406\uff09"),(0,a.kt)("td",{parentName:"tr",align:"center"},"Y")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"handler"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5176\u5c5e\u6027\u662f\u5f53\u6267\u884c\u4e00\u4e2a\u64cd\u4f5c\u65f6\u5b9a\u4e49\u4ee3\u7406\u7684\u884c\u4e3a\u7684\u51fd\u6570"),(0,a.kt)("td",{parentName:"tr",align:"center"},"Y")))),(0,a.kt)("p",null,"MDN \u7ed9\u51fa\u7684\u89e3\u91ca\u504f\u5b98\u65b9\uff0c\u901a\u4fd7\u7684\u8bb2\u7b2c\u4e00\u4e2a\u53c2\u6570 target \u5c31\u662f\u7528\u6765\u4ee3\u7406\u7684\u201c\u5bf9\u8c61\u201d\uff0c\u88ab\u4ee3\u7406\u4e4b\u540e\u5b83\u662f\u4e0d\u80fd\u76f4\u63a5\u88ab\u8bbf\u95ee\u7684\uff0c\u800c handler \u5c31\u662f\u5b9e\u73b0\u4ee3\u7406\u7684\u8fc7\u7a0b\u3002"),(0,a.kt)("h2",{id:"\u62e6\u622a\u64cd\u4f5c\u573a\u666f"},"\u62e6\u622a\u64cd\u4f5c\u573a\u666f"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u573a\u666f")),(0,a.kt)("p",null,"\u6211\u4eec\u7ecf\u5e38\u8bfb\u53d6\u4e00\u4e2a\u5bf9\u8c61\u7684 key-value\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let o = {\n    name: 'xiaoming',\n    age: 20\n}\n\nconsole.log(o.name) // xiaoming\nconsole.log(o.age) // 20\nconsole.log(o.from) // undefined\n")),(0,a.kt)("p",null,"\u5f53\u6211\u4eec\u8bfb\u53d6 from \u7684\u65f6\u5019\u8fd4\u56de\u7684\u662f undefined\uff0c\u56e0\u4e3a o \u8fd9\u4e2a\u5bf9\u8c61\u4e2d\u6ca1\u6709\u8fd9\u4e2a key-value\u3002\u60f3\u60f3\u770b\u6211\u4eec\u5728\u8bfb\u53d6\u6570\u636e\u7684\u65f6\u5019\uff0c\u8fd9\u4e2a\u6570\u636e\u7ecf\u5e38\u662f\u805a\u5408\u7684\uff0c\u5f53\u5927\u5bb6\u6ca1\u6709\u6309\u7167\u89c4\u8303\u6765\u7684\u65f6\u5019\u6216\u8005\u6570\u636e\u7f3a\u5931\u7684\u60c5\u51b5\u4e0b\uff0c\u7ecf\u5e38\u4f1a\u51fa\u73b0\u8fd9\u79cd\u201c\u4e4c\u9f99\u201d\u73b0\u8c61\u3002"),(0,a.kt)("p",null,"\u5982\u679c\u6211\u4eec\u4e0d\u60f3\u5728\u8c03\u7528 key \u7684\u65f6\u5019\u8fd4\u56de undefined\uff0c\u4e4b\u524d\u7684\u505a\u6cd5\u662f\u8fd9\u6837\u7684\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"console.log(o.from || '')\n")),(0,a.kt)("p",null,"\u5982\u679c\u6211\u4eec\u5bf9\u6240\u6709\u4ee3\u7801\u90fd\u662f\u8fd9\u79cd\u5199\u6cd5\uff0c\u90a3\u9605\u8bfb\u6027\u548c\u89c2\u8d4f\u6027\u5c31\u4e0d\u5f97\u800c\u77e5\u4e86\u3002\u503c\u5f97\u5e86\u5e78\u7684\u662f\uff0cES6 \u7684 Proxy \u53ef\u4ee5\u8ba9\u6211\u4eec\u8f7b\u677e\u7684\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let o = {\n    name: 'xiaoming',\n    age: 20\n}\n\nlet handler = {\n    get(obj, key) {\n        return Reflect.has(obj, key) ? obj[key] : ''\n    }\n}\n\nlet p = new Proxy(o, handler)\n\nconsole.log(p.from)\n")),(0,a.kt)("p",null,"\u8fd9\u4e2a\u4ee3\u7801\u662f\u60f3\u8868\u8fbe\u5982\u679c o \u5bf9\u8c61\u6709\u8fd9\u4e2a key-value \u5219\u76f4\u63a5\u8fd4\u56de\uff0c\u5982\u679c\u6ca1\u6709\u4e00\u5f8b\u8fd4\u56de ",(0,a.kt)("inlineCode",{parentName:"p"},"''")," \uff0c\u5f53\u7136\u8fd9\u91cc\u662f\u81ea\u5b9a\u4e49\uff0c\u5927\u5bb6\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u8981\u6765\u5199\u9002\u5408\u81ea\u5df1\u4e1a\u52a1\u7684\u89c4\u5219\u3002"),(0,a.kt)("p",null,"\u521a\u624d\u5bf9\u6570\u636e\u7684\u201c\u8bfb\u64cd\u4f5c\u201d\u8fdb\u884c\u4e86\u62e6\u622a\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u63cf\u8ff0\u4e0b\u201c\u5199\u64cd\u4f5c\u201d\u8fdb\u884c\u62e6\u622a\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u573a\u666f 1")),(0,a.kt)("p",null,"\u4ece\u670d\u52a1\u7aef\u83b7\u53d6\u7684\u6570\u636e\u5e0c\u671b\u662f\u53ea\u8bfb\uff0c\u4e0d\u5141\u8bb8\u5728\u4efb\u4f55\u4e00\u4e2a\u73af\u8282\u88ab\u4fee\u6539\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// response.data \u662f JSON \u683c\u5f0f\u7684\u6570\u636e\uff0c\u6765\u81ea\u670d\u52a1\u7aef\u7684\u54cd\u5e94\n// \u5728 ES5 \u4e2d\u53ea\u80fd\u901a\u8fc7\u904d\u5386\u628a\u6240\u6709\u7684\u5c5e\u6027\u8bbe\u7f6e\u4e3a\u53ea\u8bfb\nfor (let [key] of Object.entries(response.data)) {\n    Object.defineProperty(response.data, key, {\n        writable: false\n    })\n}\n")),(0,a.kt)("p",null,"\u5982\u679c\u6211\u4eec\u4f7f\u7528 Proxy \u5c31\u7b80\u5355\u5f88\u591a\u4e86\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let data = new Proxy(response.data, {\n    set(obj, key, value) {\n        return false\n    }\n})\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u573a\u666f 2")),(0,a.kt)("p",null,"\u5bf9\u4e8e\u6570\u636e\u4ea4\u4e92\u800c\u8a00\uff0c\u6821\u9a8c\u662f\u4e0d\u53ef\u6216\u7f3a\u7684\u4e00\u4e2a\u73af\u5883\uff0c\u4f20\u7edf\u7684\u505a\u6cd5\u662f\u5c06\u6821\u9a8c\u5199\u5728\u4e86\u4e1a\u52a1\u903b\u8f91\u91cc\uff0c\u5bfc\u81f4\u4ee3\u7801\u8026\u5408\u5ea6\u8f83\u9ad8\u3002\u5982\u679c\u5927\u5bb6\u4f7f\u7528 Proxy \u5c31\u53ef\u4ee5\u5c06\u4ee3\u7801\u8bbe\u8ba1\u7684\u975e\u5e38\u7075\u6d3b\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// Validator.js\nexport default (obj, key, value) => {\n    if (Reflect.has(key) && value > 20) {\n        obj[key] = value\n    }\n}\n\nimport Validator from './Validator'\nlet data = new Proxy(response.data, {\n    set: Validator\n})\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u573a\u666f 3")),(0,a.kt)("p",null,"\u5982\u679c\u5bf9\u8bfb\u5199\u8fdb\u884c\u76d1\u63a7\uff0c\u53ef\u4ee5\u8fd9\u6837\u5199\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let validator = {\n    set(target, key, value) {\n        if (key === 'age') {\n            if (typeof value !== 'number' || Number.isNaN(value)) {\n                throw new TypeError('Age must be a number')\n            }\n            if (value <= 0) {\n                throw new TypeError('Age must be a positive number')\n            }\n        }\n        return true\n    }\n}\nconst person = {\n    age: 27\n}\nconst proxy = new Proxy(person, validator)\nproxy.age = 'foo'\n// <- TypeError: Age must be a number\nproxy.age = NaN\n// <- TypeError: Age must be a number\nproxy.age = 0\n// <- TypeError: Age must be a positive number\nproxy.age = 28\nconsole.log(person.age)\n// <- 28\n\n// \u6dfb\u52a0\u76d1\u63a7\nwindow.addEventListener(\n    'error',\n    e => {\n        console.log(e.message) // Uncaught TypeError: Age must be a number\n    },\n    true\n)\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u573a\u666f 4")),(0,a.kt)("p",null,"\u4ec0\u4e48\u5b9e\u4f8b\u4e00\u4e2a\u5bf9\u8c61\uff0c\u6bcf\u4e2a\u5bf9\u8c61\u90fd\u6709\u4e00\u4e2a\u81ea\u5df1\u7684 id \u800c\u4e14\u53ea\u8bfb\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"class Component {\n    constructor() {\n        this.proxy = new Proxy({\n            id: Math.random().toString(36).slice(-8)\n        })\n    }\n    get id() {\n        return this.proxy.id\n    }\n}\n")),(0,a.kt)("h2",{id:"\u5e38\u7528\u62e6\u622a\u64cd\u4f5c"},"\u5e38\u7528\u62e6\u622a\u64cd\u4f5c"),(0,a.kt)("h3",{id:"get"},"get"),(0,a.kt)("p",null,"\u62e6\u622a\u5bf9\u8c61\u5c5e\u6027\u7684\u8bfb\u53d6\uff0c\u6bd4\u5982proxy.foo\u548cproxy","['foo']","\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let arr = [7, 8, 9]\narr = new Proxy(arr, {\n    get(target, prop) {\n        // console.log(target, prop)\n        return prop in target ? target[prop] : 'error'\n    }\n})\nconsole.log(arr[1])\nconsole.log(arr[10])\nlet dict = {\n    'hello': '\u4f60\u597d',\n    'world': '\u4e16\u754c'\n}\ndict = new Proxy(dict, {\n    get(target, prop) {\n        return prop in target ? target[prop] : prop\n    }\n})\nconsole.log(dict['world'])\nconsole.log(dict['imooc'])\n")),(0,a.kt)("h3",{id:"set"},"set"),(0,a.kt)("p",null,"\u62e6\u622a\u5bf9\u8c61\u5c5e\u6027\u7684\u8bbe\u7f6e\uff0c\u6bd4\u5982proxy.foo = v\u6216proxy","['foo']"," = v\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let arr = []\narr = new Proxy(arr, {\n    set(target, prop, val) {\n        if (typeof val === 'number') {\n            target[prop] = val\n            return true\n        } else {\n            return false\n        }\n    }\n})\narr.push(5)\narr.push(6)\nconsole.log(arr[0], arr[1], arr.length)\n")),(0,a.kt)("h3",{id:"has"},"has"),(0,a.kt)("p",null,"\u62e6\u622apropKey in proxy\u7684\u64cd\u4f5c\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let range = {\n    start: 1,\n    end: 5\n}\n\nrange = new Proxy(range, {\n    has(target, prop) {\n        return prop >= target.start && prop <= target.end\n    }\n})\nconsole.log(2 in range)\nconsole.log(9 in range)\n")),(0,a.kt)("h3",{id:"ownkeys"},"ownKeys"),(0,a.kt)("p",null,"\u62e6\u622aObject.getOwnPropertyNames(proxy)\u3001Object.getOwnPropertySymbols(proxy)\u3001Object.keys(proxy)\u3001for...in\u5faa\u73af\uff0c\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\u3002\u8be5\u65b9\u6cd5\u8fd4\u56de\u76ee\u6807\u5bf9\u8c61\u6240\u6709\u81ea\u8eab\u7684\u5c5e\u6027\u7684\u5c5e\u6027\u540d\uff0c\u800cObject.keys()\u7684\u8fd4\u56de\u7ed3\u679c\u4ec5\u5305\u62ec\u76ee\u6807\u5bf9\u8c61\u81ea\u8eab\u7684\u53ef\u904d\u5386\u5c5e\u6027\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let obj = {\n    name: 'imooc',\n    [Symbol('es')]: 'es6'\n}\nconsole.log(Object.getOwnPropertyNames(obj))\nconsole.log(Object.getOwnPropertySymbols(obj))\nconsole.log(Object.keys(obj))\nfor (let key in obj) {\n    console.log(key)\n}\nlet userinfo = {\n    username: 'xiecheng',\n    age: 34,\n    _password: '***'\n}\nuserinfo = new Proxy(userinfo, {\n    ownKeys(target) {\n        return Object.keys(target).filter(key => !key.startsWith('_'))\n    }\n})\n\n// for (let key in userinfo) {\n//     console.log(key)\n// }\nconsole.log(Object.keys(userinfo))\n")),(0,a.kt)("h3",{id:"deleteproperty"},"deleteProperty"),(0,a.kt)("p",null,"\u62e6\u622adelete proxy","[propKey]","\u7684\u64cd\u4f5c\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let user = {\n    name: 'xiecheng',\n    age: 34,\n    _password: '***'\n}\nuser = new Proxy(user, {\n    get(target, prop) {\n        if (prop.startsWith('_')) {\n            throw new Error('\u4e0d\u53ef\u8bbf\u95ee')\n        } else {\n            return target[prop]\n        }\n    },\n    set(target, prop, val) {\n        if (prop.startsWith('_')) {\n            throw new Error('\u4e0d\u53ef\u8bbf\u95ee')\n        } else {\n            target[prop] = val\n            return true\n        }\n    },\n    deleteProperty(target, prop) { // \u62e6\u622a\u5220\u9664\n        if (prop.startsWith('_')) {\n            throw new Error('\u4e0d\u53ef\u5220\u9664')\n        } else {\n            delete target[prop]\n            return true\n        }\n    },\n    ownKeys(target) {\n        return Object.keys(target).filter(key => !key.startsWith('_'))\n    }\n})\nconsole.log(user.age)\nconsole.log(user._password)\nuser.age = 18\nconsole.log(user.age)\ntry {\n    user._password = 'xxx'\n} catch (e) {\n    console.log(e.message)\n}\n\ntry {\n    // delete user.age\n    delete user._password\n} catch (e) {\n    console.log(e.message)\n}\nconsole.log(user.age)\n\nfor (let key in user) {\n    console.log(key)\n}\n")),(0,a.kt)("h3",{id:"apply"},"apply"),(0,a.kt)("p",null,"\u62e6\u622a Proxy \u5b9e\u4f8b\u4f5c\u4e3a\u51fd\u6570\u8c03\u7528\u7684\u64cd\u4f5c\uff0c\u6bd4\u5982proxy(...args)\u3001proxy.call(object, ...args)\u3001proxy.apply(...)\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let sum = (...args) => {\n    let num = 0\n    args.forEach(item => {\n        num += item\n    })\n    return num\n}\n\nsum = new Proxy(sum, {\n    apply(target, ctx, args) {\n        return target(...args) * 2\n    }\n})\nconsole.log(sum(1, 2))\nconsole.log(sum.call(null, 1, 2, 3))\nconsole.log(sum.apply(null, [1, 2, 3]))\n")),(0,a.kt)("h3",{id:"construct"},"construct"),(0,a.kt)("p",null,"\u62e6\u622a Proxy \u5b9e\u4f8b\u4f5c\u4e3a\u6784\u9020\u51fd\u6570\u8c03\u7528\u7684\u64cd\u4f5c\uff0c\u6bd4\u5982new proxy(...args)\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let User = class {\n    constructor(name) {\n        this.name = name\n    }\n}\nUser = new Proxy(User, {\n    construct(target, args, newTarget) {\n        console.log('construct')\n        return new target(...args)\n    }\n})\nconsole.log(new User('imooc'))\n")),(0,a.kt)("h3",{id:"\u63a8\u8350\u9605\u8bfb"},"\u63a8\u8350\u9605\u8bfb"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://ponyfoo.com/articles/es6-proxies-in-depth"},"ES6 Proxies in Depth")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://lucasfcosta.com/2016/11/15/Meta-Programming-in-JavaScript-Part-Three.html"},"Meta Programming In JavaScript - Part Three: Proxies and Reflection")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://www.sitepoint.com/es6-proxies/"},"How to Use Proxies")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://habr.com/en/post/448214/"},"ES6 Proxies in practice"))))}m.isMDXComponent=!0}}]);